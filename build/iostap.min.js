/* iostap - v1.0.2 - MIT */
/* A micro-library for iOS-like tap events in the browser */
/* https://github.com/stephenhutchings/iostap.git */
var defaults;defaults={eventName:"iostap",activeClass:"__active",minActiveMS:50,buffer:20,maxDistance:Math.pow(window.innerHeight*window.innerWidth,.35)},function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.iostap=e()}(this,function(){return{initialize:function(t){var e,n,o,a,r,l,i,u,c,s,d,f,v,p,m,h,w,g,N,b,E,S;return null==t&&(t={}),g=null,h=null,u=!1,r="ontouchstart"in window,S=r?"touchstart":"mousedown",E=r?"touchmove":"mousemove",b=r?"touchend":"mouseup",a=t.eventName||defaults.eventName,e=t.activeClass||defaults.activeClass,i=t.minActiveMS||defaults.minActiveMS,o=t.buffer||defaults.buffer,l=t.maxDistance||defaults.maxDistance,p=function(t){return"tagName"in t?t:t.parentNode},v=function(t){var e,n,o;for(e=t;e.parentNode&&!(null!=(n=e.dataset)?n.touch:void 0);)e=e.parentNode;return(null!=e?null!=(o=e.dataset)?o.touch:void 0:void 0)?e:t},m=function(t){var e;for(e=!1;t.parentNode&&r&&!(e=/^(auto|scroll)$/.test("function"==typeof getComputedStyle?getComputedStyle(t).overflow:void 0));)t=t.parentNode;return e&&t},w=function(t){var n,o,a,r,l,i;if(t){for(n=g.el,l=[];n.parentNode&&(n.classList.add(e),!n.dataset.nobubble);)l.push(n=n.parentNode);return l}for(r=document.querySelectorAll("."+e),i=[],o=0,a=r.length;a>o;o++)n=r[o],i.push(n.classList.remove(e));return i},f=function(t){var e;if(!(g||t.target===document.activeElement&&t.target.nodeName.match(/^(INPUT|TEXTAREA)$/)))return window.clearTimeout(h),e=p(t.target),e=v(e),g={el:e,offset:e.getBoundingClientRect(),scrollParent:m(e)},d(t),n(E,d,!1),n(b,s,!1)},d=function(t){var e,n,a,i,s,d,f,v,p,m,h,N;if(g)return p=r?t.touches[0]:t,e=p.clientX,n=p.clientY,m=g.offset,d=m.width,s=m.top,i=m.left,a=m.height,null==(f=g.offset).startX&&(f.startX=e),null==(v=g.offset).startY&&(v.startY=n),null==g.parentScrollY&&(g.parentScrollY=null!=(h=g.scrollParent)?h.scrollTop:void 0),g.parentScrollY!==(null!=(N=g.scrollParent)?N.scrollTop:void 0)?c():(u=e>i-o&&i+d+o>e&&n>s-o&&s+a+o>n&&Math.abs(e-g.offset.startX)<l&&Math.abs(n-g.offset.startY)<l,w(u))},s=function(t){var e,n,o,r;if(g)return N(E,d,!1),N(b,s,!1),u&&(t.preventDefault(),t.stopPropagation(),e=g.el,n=g.scrollParent,o=document.createEvent("Event"),o.initEvent(a,!0,!0),n?(r=t.changedTouches[0],e=document.elementFromPoint(r.pageX,r.pageY)||e):e.dispatchEvent(o),window.clearTimeout(h),h=window.setTimeout(function(){return w(!1),n?e.dispatchEvent(o):void 0},i)),g=null},c=function(){return g?(N(E,d,!1),N(b,s,!1),g=null,w(!1)):void 0},n=function(t,e,n){return null==n&&(n=!1),window.addEventListener(t,e,n)},N=function(t,e,n){return null==n&&(n=!1),window.removeEventListener(t,e,n)},"undefined"!=typeof Backbone&&null!==Backbone&&Backbone.on("canceltap",c),n(S,f,!1),r?n("touchcancel",c,!1):void 0}}});