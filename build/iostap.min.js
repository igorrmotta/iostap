/* iostap - v1.2.2 - MIT */
/* A micro-library for iOS-like tap events in the browser */
/* https://github.com/stephenhutchings/iostap.git */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.iostap=e()}(this,function(){var t;return t={eventName:"iostap",activeClass:"__active",minActiveMS:50,buffer:20,maxDistance:Math.pow(window.innerHeight*window.innerWidth,.35),allowDefault:function(t){return t.target.nodeName.match(/^(INPUT|TEXTAREA|SELECT)$/)}},{set:function(e){var n,o,r;null==e&&(e={}),r=[];for(n in e)o=e[n],null!=o&&r.push(t[n]=o);return r},initialize:function(e){var n,o,r,a,i,l,u,c,s,f,d,p,v,m,h,w,g,E,N,Y;return m=null,p=null,a=!1,o="onpointerdown"in window,r="ontouchstart"in window,E=o?["pointerdown","pointermove","pointerup"]:r?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],Y=E[0],g=E[1],w=E[2],this.set(e),f=function(t){return"tagName"in t?t:t.parentNode},s=function(t){var e,n,o;for(e=t;e.parentNode&&!(null!=(n=e.dataset)?n.touch:void 0);)e=e.parentNode;return(null!=e?null!=(o=e.dataset)?o.touch:void 0:void 0)?e:t},d=function(t){var e;for(e=!1;t.parentNode&&r&&!o&&!(e=/^(auto|scroll)$/.test("function"==typeof getComputedStyle?getComputedStyle(t).overflow:void 0));)t=t.parentNode;return e&&t},v=function(e){var n,o,r,a,i,l;if(e){for(n=m.el,i=[];n.parentNode&&(n.classList.add(t.activeClass),!n.dataset.nobubble);)i.push(n=n.parentNode);return i}for(a=document.querySelectorAll("."+t.activeClass),l=[],o=0,r=a.length;r>o;o++)n=a[o],l.push(n.classList.remove(t.activeClass));return l},c=function(t){var e;if(!(m||t.target===document.activeElement&&t.target.nodeName.match(/^(INPUT|TEXTAREA)$/)))return window.clearTimeout(p),e=f(t.target),e=s(e),m={el:e,offset:e.getBoundingClientRect(),scrollParent:d(e)},u(t),n(g,u,!1),n(w,l,!1)},u=function(e){var n,o,r,l,u,c,s,f,d,p,h,w,g;if(m)return d=(null!=(p=e.touches)?p[0]:void 0)||e,n=d.clientX,o=d.clientY,h=m.offset,c=h.width,u=h.top,l=h.left,r=h.height,null==(s=m.offset).startX&&(s.startX=n),null==(f=m.offset).startY&&(f.startY=o),null==m.parentScrollY&&(m.parentScrollY=null!=(w=m.scrollParent)?w.scrollTop:void 0),m.parentScrollY!==(null!=(g=m.scrollParent)?g.scrollTop:void 0)?i():(a=n>l-t.buffer&&n<l+c+t.buffer&&o>u-t.buffer&&o<u+r+t.buffer&&Math.abs(n-m.offset.startX)<t.maxDistance&&Math.abs(o-m.offset.startY)<t.maxDistance,v(a))},l=function(e){var n,i,c,s,f,d,E,N,Y,T,X;if(m)return h(g,u,!1),h(w,l,!1),a&&(t.allowDefault(e)||(e.preventDefault(),e.stopPropagation()),T=r&&!o?e.changedTouches[0]:e,c=m.el,d=m.scrollParent,s=T.pageX,f=T.pageY,n=T.clientX,i=T.clientY,X=m.offset,E=X.startX,N=X.startY,Y=document.createEvent("Event"),Y.initEvent(t.eventName,!0,!0),Y.detail={pageX:s,pageY:f,clientX:n,clientY:i,startX:E,startY:N},d?c=document.elementFromPoint(T.pageX,T.pageY)||c:c.dispatchEvent(Y),window.clearTimeout(p),p=window.setTimeout(function(){return v(!1),d?c.dispatchEvent(Y):void 0},t.minActiveMS)),m=null},i=function(){return m?(h(g,u,!1),h(w,l,!1),m=null,v(!1)):void 0},n=function(t,e,n){return null==n&&(n=!1),window.addEventListener(t,e,n)},h=function(t,e,n){return null==n&&(n=!1),window.removeEventListener(t,e,n)},null!=(N=window.Backbone)&&N.on("canceltap",i),n(Y,c,!1),r&&n("touchcancel",i,!1),o?n("pointercancel",i,!1):void 0}}});