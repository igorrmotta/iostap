/* iostap - v1.0.0 - MIT */
/* A micro-library for iOS-like tap events in the browser */
/* https://github.com/stephenhutchings/iostap.git */
var defaults;defaults={eventName:"iostap",activeClass:"__active",minActiveMS:50,buffer:20,maxDistance:Math.pow(window.innerHeight*window.innerWidth,.35)},function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.iostap=t()}(this,function(){return{initialize:function(e){var t,n,o,a,r,i,l,u,c,s,f,d,v,p,m,h,w,g,b,N,Y,E;return null==e&&(e={}),g=null,h=null,u=!1,r="ontouchstart"in window,E=r?"touchstart":"mousedown",Y=r?"touchmove":"mousemove",N=r?"touchend":"mouseup",a=e.eventName||defaults.eventName,t=e.activeClass||defaults.activeClass,l=e.minActiveMS||defaults.minActiveMS,o=e.buffer||defaults.buffer,i=e.maxDistance||defaults.maxDistance,p=function(e){return"tagName"in e?e:e.parentNode},v=function(e){var t,n,o;for(t=e;t.parentNode&&!(null!=(n=t.dataset)?n.touch:void 0);)t=t.parentNode;return(null!=t?null!=(o=t.dataset)?o.touch:void 0:void 0)?t:e},m=function(e){var t;for(t=!1;e.parentNode&&r&&!(t=t||e.scrollHeight>e.offsetHeight);)e=e.parentNode;return t&&e},w=function(e){var n,o,a,r,i,l;if(e){for(n=g.el,i=[];n.parentNode&&(n.classList.add(t),!n.dataset.nobubble);)i.push(n=n.parentNode);return i}for(r=document.querySelectorAll("."+t),l=[],o=0,a=r.length;a>o;o++)n=r[o],l.push(n.classList.remove(t));return l},d=function(e){var t;if(!g)return window.clearTimeout(h),t=p(e.target),t=v(t),g={el:t,offset:t.getBoundingClientRect(),scrollParent:m(t)},f(e),n(Y,f,!1),n(N,s,!1)},f=function(e){var t,n,a,l,s,f,d,v,p,m,h,b;if(g)return p=r?e.touches[0]:e,t=p.clientX,n=p.clientY,m=g.offset,f=m.width,s=m.top,l=m.left,a=m.height,null==(d=g.offset).startX&&(d.startX=t),null==(v=g.offset).startY&&(v.startY=n),null==g.parentScrollY&&(g.parentScrollY=null!=(h=g.scrollParent)?h.scrollTop:void 0),g.parentScrollY!==(null!=(b=g.scrollParent)?b.scrollTop:void 0)?c():(u=t>l-o&&l+f+o>t&&n>s-o&&s+a+o>n&&Math.abs(t-g.offset.startX)<i&&Math.abs(n-g.offset.startY)<i,w(u))},s=function(e){var t,n,o,r;if(g)return b(Y,f,!1),b(N,s,!1),u&&(e.preventDefault(),e.stopPropagation(),t=g.el,n=g.scrollParent,o=document.createEvent("Event"),o.initEvent(a,!0,!0),n?(r=e.changedTouches[0],t=document.elementFromPoint(r.pageX,r.pageY)||t):t.dispatchEvent(o),window.clearTimeout(h),h=window.setTimeout(function(){return w(!1),n?t.dispatchEvent(o):void 0},l)),g=null},c=function(){return g?(b(Y,f,!1),b(N,s,!1),g=null,w(!1)):void 0},n=function(e,t,n){return null==n&&(n=!1),window.addEventListener(e,t,n)},b=function(e,t,n){return null==n&&(n=!1),window.removeEventListener(e,t,n)},"undefined"!=typeof Backbone&&null!==Backbone&&Backbone.on("canceltap",c),n(E,d,!1),r?n("touchcancel",c,!1):void 0}}});