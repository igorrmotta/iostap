/* iostap - v1.0.3 - MIT */
/* A micro-library for iOS-like tap events in the browser */
/* https://github.com/stephenhutchings/iostap.git */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.iostap=e()}(this,function(){var t;return t={eventName:"iostap",activeClass:"__active",minActiveMS:50,buffer:20,maxDistance:Math.pow(window.innerHeight*window.innerWidth,.35)},{initialize:function(e){var n,o,r,a,i,l,u,c,s,d,f,v,p,m,h,w,g,N,b,E,S,T;return null==e&&(e={}),N=null,w=null,c=!1,i="ontouchstart"in window,T=i?"touchstart":"mousedown",S=i?"touchmove":"mousemove",E=i?"touchend":"mouseup",a=e.eventName||t.eventName,n=e.activeClass||t.activeClass,u=e.minActiveMS||t.minActiveMS,r=e.buffer||t.buffer,l=e.maxDistance||t.maxDistance,m=function(t){return"tagName"in t?t:t.parentNode},p=function(t){var e,n,o;for(e=t;e.parentNode&&!(null!=(n=e.dataset)?n.touch:void 0);)e=e.parentNode;return(null!=e?null!=(o=e.dataset)?o.touch:void 0:void 0)?e:t},h=function(t){var e;for(e=!1;t.parentNode&&i&&!(e=/^(auto|scroll)$/.test("function"==typeof getComputedStyle?getComputedStyle(t).overflow:void 0));)t=t.parentNode;return e&&t},g=function(t){var e,o,r,a,i,l;if(t){for(e=N.el,i=[];e.parentNode&&(e.classList.add(n),!e.dataset.nobubble);)i.push(e=e.parentNode);return i}for(a=document.querySelectorAll("."+n),l=[],o=0,r=a.length;r>o;o++)e=a[o],l.push(e.classList.remove(n));return l},v=function(t){var e;if(!(N||t.target===document.activeElement&&t.target.nodeName.match(/^(INPUT|TEXTAREA)$/)))return window.clearTimeout(w),e=m(t.target),e=p(e),N={el:e,offset:e.getBoundingClientRect(),scrollParent:h(e)},f(t),o(S,f,!1),o(E,d,!1)},f=function(t){var e,n,o,a,u,d,f,v,p,m,h,w;if(N)return p=i?t.touches[0]:t,e=p.clientX,n=p.clientY,m=N.offset,d=m.width,u=m.top,a=m.left,o=m.height,null==(f=N.offset).startX&&(f.startX=e),null==(v=N.offset).startY&&(v.startY=n),null==N.parentScrollY&&(N.parentScrollY=null!=(h=N.scrollParent)?h.scrollTop:void 0),N.parentScrollY!==(null!=(w=N.scrollParent)?w.scrollTop:void 0)?s():(c=e>a-r&&a+d+r>e&&n>u-r&&u+o+r>n&&Math.abs(e-N.offset.startX)<l&&Math.abs(n-N.offset.startY)<l,g(c))},d=function(t){var e,n,o,r;if(N)return b(S,f,!1),b(E,d,!1),c&&(t.preventDefault(),t.stopPropagation(),e=N.el,n=N.scrollParent,o=document.createEvent("Event"),o.initEvent(a,!0,!0),n?(r=t.changedTouches[0],e=document.elementFromPoint(r.pageX,r.pageY)||e):e.dispatchEvent(o),window.clearTimeout(w),w=window.setTimeout(function(){return g(!1),n?e.dispatchEvent(o):void 0},u)),N=null},s=function(){return N?(b(S,f,!1),b(E,d,!1),N=null,g(!1)):void 0},o=function(t,e,n){return null==n&&(n=!1),window.addEventListener(t,e,n)},b=function(t,e,n){return null==n&&(n=!1),window.removeEventListener(t,e,n)},"undefined"!=typeof Backbone&&null!==Backbone&&Backbone.on("canceltap",s),o(T,v,!1),i?o("touchcancel",s,!1):void 0}}});