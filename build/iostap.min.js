/* iostap - v1.1.0 - MIT */
/* A micro-library for iOS-like tap events in the browser */
/* https://github.com/stephenhutchings/iostap.git */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.iostap=e()}(this,function(){var t;return t={eventName:"iostap",activeClass:"__active",minActiveMS:50,buffer:20,maxDistance:Math.pow(window.innerHeight*window.innerWidth,.35),allowDefault:function(t){return t.target.nodeName.match(/^(INPUT|TEXTAREA|SELECT)$/)}},{set:function(e){var n,o,r;null==e&&(e={}),r=[];for(n in e)o=e[n],null!=o&&r.push(t[n]=o);return r},initialize:function(e){var n,o,r,a,i,l,u,c,s,f,d,v,p,m,h,w,g;return p=null,d=null,r=!1,o="ontouchstart"in window,g=o?"touchstart":"mousedown",w=o?"touchmove":"mousemove",h=o?"touchend":"mouseup",this.set(e),s=function(t){return"tagName"in t?t:t.parentNode},c=function(t){var e,n,o;for(e=t;e.parentNode&&!(null!=(n=e.dataset)?n.touch:void 0);)e=e.parentNode;return(null!=e?null!=(o=e.dataset)?o.touch:void 0:void 0)?e:t},f=function(t){var e;for(e=!1;t.parentNode&&o&&!(e=/^(auto|scroll)$/.test("function"==typeof getComputedStyle?getComputedStyle(t).overflow:void 0));)t=t.parentNode;return e&&t},v=function(e){var n,o,r,a,i,l;if(e){for(n=p.el,i=[];n.parentNode&&(n.classList.add(t.activeClass),!n.dataset.nobubble);)i.push(n=n.parentNode);return i}for(a=document.querySelectorAll("."+t.activeClass),l=[],o=0,r=a.length;r>o;o++)n=a[o],l.push(n.classList.remove(t.activeClass));return l},u=function(t){var e;if(!(p||t.target===document.activeElement&&t.target.nodeName.match(/^(INPUT|TEXTAREA)$/)))return window.clearTimeout(d),e=s(t.target),e=c(e),p={el:e,offset:e.getBoundingClientRect(),scrollParent:f(e)},l(t),n(w,l,!1),n(h,i,!1)},l=function(e){var n,i,l,u,c,s,f,d,m,h,w,g;if(p)return m=o?e.touches[0]:e,n=m.clientX,i=m.clientY,h=p.offset,s=h.width,c=h.top,u=h.left,l=h.height,null==(f=p.offset).startX&&(f.startX=n),null==(d=p.offset).startY&&(d.startY=i),null==p.parentScrollY&&(p.parentScrollY=null!=(w=p.scrollParent)?w.scrollTop:void 0),p.parentScrollY!==(null!=(g=p.scrollParent)?g.scrollTop:void 0)?a():(r=n>u-t.buffer&&n<u+s+t.buffer&&i>c-t.buffer&&i<c+l+t.buffer&&Math.abs(n-p.offset.startX)<t.maxDistance&&Math.abs(i-p.offset.startY)<t.maxDistance,v(r))},i=function(e){var n,o,a,u;if(p)return m(w,l,!1),m(h,i,!1),r&&(t.allowDefault(e)||(e.preventDefault(),e.stopPropagation()),n=p.el,o=p.scrollParent,a=document.createEvent("Event"),a.initEvent(t.eventName,!0,!0),o?(u=e.changedTouches[0],n=document.elementFromPoint(u.pageX,u.pageY)||n):n.dispatchEvent(a),window.clearTimeout(d),d=window.setTimeout(function(){return v(!1),o?n.dispatchEvent(a):void 0},t.minActiveMS)),p=null},a=function(){return p?(m(w,l,!1),m(h,i,!1),p=null,v(!1)):void 0},n=function(t,e,n){return null==n&&(n=!1),window.addEventListener(t,e,n)},m=function(t,e,n){return null==n&&(n=!1),window.removeEventListener(t,e,n)},"undefined"!=typeof Backbone&&null!==Backbone&&Backbone.on("canceltap",a),n(g,u,!1),o?n("touchcancel",a,!1):void 0}}});